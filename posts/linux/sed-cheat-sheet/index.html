<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='sed 语法 sed [options]... [script] [input-file]
sed 默认输入输出为 stdin, stdout
 sed treats multiple input files as one long stream. The following example prints the first line of the first file (one.txt) and the last line of the last file (three.txt). Use -s to reverse this behavior. 下面的命令中, sed 将 one two three 三个文件当作一个输入, 所以只会输出 one文件的第一行和 three 文件的最后一行
 sed -n &#39;1p ; $p&#39; one.txt two.txt three.txt
options -n --quiet'>
<title>Sed 速查表</title>

<link rel='canonical' href='https://frank2016ma.github.io/seattle/posts/linux/sed-cheat-sheet/'>

<link rel="stylesheet" href="/seattle/scss/style.min.8191399262444ab68b72a18c97392f5349be20a1615d77445be51e974c144cff.css"><meta property='og:title' content='Sed 速查表'>
<meta property='og:description' content='sed 语法 sed [options]... [script] [input-file]
sed 默认输入输出为 stdin, stdout
 sed treats multiple input files as one long stream. The following example prints the first line of the first file (one.txt) and the last line of the last file (three.txt). Use -s to reverse this behavior. 下面的命令中, sed 将 one two three 三个文件当作一个输入, 所以只会输出 one文件的第一行和 three 文件的最后一行
 sed -n &#39;1p ; $p&#39; one.txt two.txt three.txt
options -n --quiet'>
<meta property='og:url' content='https://frank2016ma.github.io/seattle/posts/linux/sed-cheat-sheet/'>
<meta property='og:site_name' content='Frank in seattle'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='cheatsheet' /><meta property='article:published_time' content='2023-06-10T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-06-10T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Sed 速查表">
<meta name="twitter:description" content="sed 语法 sed [options]... [script] [input-file]
sed 默认输入输出为 stdin, stdout
 sed treats multiple input files as one long stream. The following example prints the first line of the first file (one.txt) and the last line of the last file (three.txt). Use -s to reverse this behavior. 下面的命令中, sed 将 one two three 三个文件当作一个输入, 所以只会输出 one文件的第一行和 three 文件的最后一行
 sed -n &#39;1p ; $p&#39; one.txt two.txt three.txt
options -n --quiet">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            localStorage.setItem(colorSchemeKey, "dark");
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/seattle">Frank in seattle</a></h1>
            <h2 class="site-description">frank2016ma@foxmail.com</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/seattle/' >
                
                
                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/seattle/posts/javascript/' >
                
                
                
                <span>Javascript</span>
            </a>
        </li>
        
        
        <li  class='current' >
            <a href='/seattle/posts/linux/' >
                
                
                
                <span>Linux</span>
            </a>
        </li>
        
        
        <li >
            <a href='/seattle/posts/python/' >
                
                
                
                <span>Python</span>
            </a>
        </li>
        
        
        <li >
            <a href='/seattle/posts/hugo/' >
                
                
                
                <span>Hugo</span>
            </a>
        </li>
        
        
        <li >
            <a href='/seattle/archives/' >
                
                
                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/seattle/categories/' >
                
                
                
                <span>Categories</span>
            </a>
        </li>
        
        
        <li >
            <a href='/seattle/search/' >
                
                
                
                <span>Search</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#sed-语法">sed 语法</a></li>
    <li><a href="#options">options</a></li>
    <li><a href="#script-语法">script 语法</a>
      <ul>
        <li><a href="#addr">[addr]</a>
          <ul>
            <li><a href="#行号">行号</a></li>
            <li><a href="#正则表达式-regexp">正则表达式 /regexp/</a></li>
            <li><a href="#regexpm-多行匹配模式">/regexp/M 多行匹配模式</a></li>
            <li><a href="#地址范围">地址范围</a></li>
            <li><a href="#addr1-n">addr1, +N</a></li>
          </ul>
        </li>
        <li><a href="#commandsx">commands(X)</a>
          <ul>
            <li><a href="#a-在addr后面添加内容">a (在addr后面添加内容)</a></li>
            <li><a href="#i-在addr前面插入内容">i (在addr前面插入内容)</a></li>
            <li><a href="#c-替换addr整行内容">c (替换addr整行内容)</a></li>
            <li><a href="#p-输出addr行的内容-配合-n使用">p (输出addr行的内容, 配合-n使用)</a></li>
            <li><a href="#ysrcdst-映射替换">y/src/dst/ (映射替换)</a></li>
            <li><a href="#sregexpreplacementflags-替换文本">s/regexp/replacement/[flags] (替换文本)</a>
              <ul>
                <li><a href="#flags">[flags]</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#examples">examples</a>
      <ul>
        <li><a href="#查找">查找</a></li>
        <li><a href="#替换文本">替换文本</a></li>
        <li><a href="#追加行">追加行</a></li>
        <li><a href="#删除行">删除行</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/seattle/categories/linux/" >
                Linux
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/seattle/posts/linux/sed-cheat-sheet/">Sed 速查表</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 10, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    3 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <!-- ## 介绍

sed is a stream editor. A stream editor is used to perform basic text transformations on an input stream (a file or input from a pipeline). 
While in some ways similar to an editor which permits scripted edits (such as ed), sed works by making only one pass over the input(s), 
and is consequently more efficient. But it is sed’s ability to filter text in a pipeline which particularly distinguishes it from other types of editors.

## pattern space

When sed reads a file line by line, the line that has been currently read is inserted into the pattern buffer (pattern space). Pattern buffer is like the temporary buffer, the scratchpad where the current information is stored. When you tell sed to print, it prints the pattern buffer. -->
<h2 id="sed-语法">sed 语法</h2>
<p><code>sed [options]... [script] [input-file]</code></p>
<p><strong><code>sed</code> 默认输入输出为 <code>stdin</code>, <code>stdout</code></strong></p>
<blockquote>
<p>sed treats multiple input files as one long stream.
The following example prints the first line of the first file (one.txt) and the last line of the last file (three.txt).
Use -s to reverse this behavior.<br/>
下面的命令中, sed 将 one two three 三个文件当作一个输入, 所以只会输出 one文件的第一行和 three 文件的最后一行</p>
</blockquote>
<p><code>sed -n  '1p ; $p' one.txt two.txt three.txt</code></p>
<h2 id="options">options</h2>
<p><code>-n</code><br/>
<code>--quiet</code></p>
<p>By default sed prints all processed input (except input that has been modified/deleted by commands such as d). Use -n to suppress output, and the p command to print specific lines. The following command prints only line 45 of the input file:</p>
<p><code>-i</code><br/>
<code>--in-place</code></p>
<p>修改文件并备份原文件</p>
<p><code>sed -i.bak 's/foo/bar/g' file.txt</code>等于```sed &ndash;in-place=.bak &rsquo;s/foo/bar/g' file.txt`</p>
<p>以上命令会修改 file.txt 文件的内容, 并且备份原文件为 file.txt.bak</p>
<p><code>sed -i 's/foo/bar/g' file.txt</code> 则会直接修改 file.txt 文件</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 从文件中读取脚本</span>
sed -f myscript.sed input.txt
<span style="color:#75715e"># -e 指定脚本, 通常可省略</span>
sed <span style="color:#e6db74">&#39;s/hello/world/&#39;</span> input.txt
sed -e <span style="color:#e6db74">&#39;s/hello/world/&#39;</span> input.txt
sed --expression<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;s/hello/world/&#39;</span> input.txt
<span style="color:#75715e"># -e 参数可以连续使用</span>
sed -e <span style="color:#e6db74">&#39;/^foo/d&#39;</span> -e <span style="color:#e6db74">&#39;s/hello/world/&#39;</span> input.txt
</code></pre></td></tr></table>
</div>
</div><p><code>-s</code><br/>
<code>--separate</code></p>
<p>上面提到过, sed会将多个文件合并成一个输入, 使用-s命令可以将它们拆分视为多个输入</p>
<h2 id="script-语法">script 语法</h2>
<p><code>[addr]X[options]</code></p>
<p>X 表示一个sed 命令字母</p>
<h3 id="addr">[addr]</h3>
<p>addr 表示行地址, 可以是行号, 正则表达式, 也可以是地址范围</p>
<h4 id="行号">行号</h4>
<p><code>sed '144s/hello/world/' input.txt</code></p>
<p>将第144行的hello替换成world</p>
<p><code>$</code> 表示最后一行</p>
<p>n~step</p>
<p>第n行开始的每隔step行</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">seq <span style="color:#ae81ff">10</span> | sed -n <span style="color:#e6db74">&#39;0~4p&#39;</span>
<span style="color:#ae81ff">4</span>
<span style="color:#ae81ff">8</span>

seq <span style="color:#ae81ff">10</span> | sed -n <span style="color:#e6db74">&#39;1~3p&#39;</span>
<span style="color:#ae81ff">1</span>
<span style="color:#ae81ff">4</span>
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">10</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="正则表达式-regexp">正则表达式 /regexp/</h4>
<p><code>sed '/apple/s/hello/world/' input.txt</code> 将包含<code>apple</code>的行 的hello 替换成 world</p>
<p>如果要匹配的字符串本身包含 斜杠<code>/</code>, 可以用其他符号代替斜杠(通常是<code>%</code>), 这样可以避免频繁使用 <code>\</code> 来转义 <code>/</code></p>
<p>下面三种写法都是匹配 以<code>/home/alice/documents/</code>开头的行</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed -n <span style="color:#e6db74">&#39;/^\/home\/alice\/documents\//p&#39;</span>
sed -n <span style="color:#e6db74">&#39;\%^/home/alice/documents/%p&#39;</span>
sed -n <span style="color:#e6db74">&#39;\;^/home/alice/documents/;p&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="regexpm-多行匹配模式">/regexp/M 多行匹配模式</h4>
<h4 id="地址范围">地址范围</h4>
<h4 id="addr1-n">addr1, +N</h4>
<p>匹配第<code>addr1</code>行及后面的N行</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">seq <span style="color:#ae81ff">10</span> | sed -n <span style="color:#e6db74">&#39;6,+2p&#39;</span>
<span style="color:#ae81ff">6</span>
<span style="color:#ae81ff">7</span>
<span style="color:#ae81ff">8</span>
</code></pre></td></tr></table>
</div>
</div><p><code>sed '4,17s/hello/world/' input.txt</code> 从第4行到第17行的hello 替换成world(左闭右闭)</p>
<p><code>!</code> 反向匹配 <br/>
<code>sed '/apple/!s/hello/world/' input.txt</code> 将<strong>不包含</strong><code>apple</code>的行 的hello 替换成 world</p>
<p>地址范围 <br/>
<code>sed '4,17s/hello/world/' input.txt</code> <strong>将除了从第4行到第17行的所有行</strong>的hello 替换成world</p>
<h3 id="commandsx">commands(X)</h3>
<h4 id="a-在addr后面添加内容">a (在addr后面添加内容)</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">    seq <span style="color:#ae81ff">3</span> | sed <span style="color:#e6db74">&#39;2a hello&#39;</span>
    <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">2</span>
    hello
    <span style="color:#ae81ff">3</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="i-在addr前面插入内容">i (在addr前面插入内容)</h4>
<h4 id="c-替换addr整行内容">c (替换addr整行内容)</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">seq <span style="color:#ae81ff">10</span> | sed <span style="color:#e6db74">&#39;2,9c hello&#39;</span>
<span style="color:#ae81ff">1</span>
hello
<span style="color:#ae81ff">10</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="p-输出addr行的内容-配合-n使用">p (输出addr行的内容, 配合-n使用)</h4>
<h4 id="ysrcdst-映射替换">y/src/dst/ (映射替换)</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo hello world | sed <span style="color:#e6db74">&#39;y/abcdefghij/0123456789/&#39;</span>
<span style="color:#75715e"># 74llo worl3</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="sregexpreplacementflags-替换文本">s/regexp/replacement/[flags] (替换文本)</h4>
<h5 id="flags">[flags]</h5>
<ul>
<li>
<p>g, 全局匹配</p>
</li>
<li>
<p>[number], 仅替换第n个匹配的字符串</p>
</li>
</ul>
<hr>
<h2 id="examples">examples</h2>
<p><strong>以下的替换、追加及删除操作, 是不会修改原文件的, 修改文件需要加上<code>-i</code>参数</strong></p>
<h3 id="查找">查找</h3>
<p><code>sed -n '/hello/p' file.txt</code></p>
<p>修改文件并备份原文件</p>
<p><code>sed -i.bak 's/foo/bar/g' file.txt</code></p>
<p>以上命令会直接修改 file.txt 文件的内容, 并且备份原文件为 file.txt.bak</p>
<p><code>-i</code> 的意思是 inplace</p>
<h3 id="替换文本">替换文本</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed <span style="color:#e6db74">&#39;s/old/new/g&#39;</span> file.txt
<span style="color:#75715e"># s 表示执行替换操作</span>
<span style="color:#75715e"># g 表示全局替换</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="追加行">追加行</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed <span style="color:#e6db74">&#39;$a THE END!&#39;</span> file.txt
<span style="color:#75715e"># $ 表示最后一行</span>
<span style="color:#75715e"># a 表示追加行</span>
<span style="color:#75715e"># &#39;THE END&#39; 表示 要追加内容</span>
<span style="color:#75715e"># 并不会修改 file.txt 中的内容, 如果</span>
sed <span style="color:#e6db74">&#39;2 i new-line&#39;</span> input.txt
<span style="color:#75715e"># 在第二行前面插入 &#39;new-line&#39;</span>
sed <span style="color:#e6db74">&#39;2 a new-line&#39;</span> input.txt
<span style="color:#75715e"># 在第二行前面插入 &#39;new-line&#39;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="删除行">删除行</h3>
<p>删除第5到7行</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed <span style="color:#e6db74">&#39;5,7d&#39;</span> file.txt
</code></pre></td></tr></table>
</div>
</div><p>删除第5行和第7行</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed <span style="color:#e6db74">&#39;5d;7d&#39;</span> file.txt
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 删除 &#39;Hello&#39; 开头的所有行, 区分大小写</span>
sed <span style="color:#e6db74">&#39;/^Hello/d&#39;</span> file.txt
</code></pre></td></tr></table>
</div>
</div><hr>
<p><a class="link" href="https://www.gnu.org/software/sed/manual/sed.html"  target="_blank" rel="noopener"
    >sed, a stream editor</a></p>
<p><a class="link" href="https://stackoverflow.com/questions/12833714/the-concept-of-hold-space-and-pattern-space-in-sed"  target="_blank" rel="noopener"
    >linux - The Concept of &lsquo;Hold space&rsquo; and &lsquo;Pattern space&rsquo; in sed - Stack Overflow</a></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/seattle/tags/cheatsheet/">cheatsheet</a>
        
    </section>


    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/seattle/posts/linux/apt-cheat-sheet/">
        
        

        <div class="article-details">
            <h2 class="article-title">apt 速查表</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/seattle/posts/linux/grep-cheat-sheet/">
        
        

        <div class="article-details">
            <h2 class="article-title">Grep 速查表</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/seattle/posts/linux/find-cheat-sheet/">
        
        

        <div class="article-details">
            <h2 class="article-title">Find 速查表</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/seattle/posts/linux/tmux/">
        
        

        <div class="article-details">
            <h2 class="article-title">Tmux 速查表</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/seattle/posts/linux/tldr-cheat-sheet/">
        
        

        <div class="article-details">
            <h2 class="article-title">tldr - 更加简洁的帮助文档</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2023 Frank in seattle
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.16.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
        <br>
        <span>
            <a href="https://beian.miit.gov.cn/">苏ICP备2023011679号-1</a>
        </span>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/seattle/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
